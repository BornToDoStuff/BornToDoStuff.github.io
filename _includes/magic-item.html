{%- if include.page_bool %}{% assign post = page %}{% endif -%}
<magic-item id="{{ post.item_id }}" class="magic-item {{ post.item_rarity | slugify }} {{ post.category | slugify }}{% if post.item_attunement %} attunement{% endif %}{% if post.item_curse %} cursed{% endif %}{% if post.item_image %} image{% endif %}">
  <item-head>
    <item-title>
      <a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a>
      {%- if post.category == "Weapon" %} {% assign subtype_bool = true %} {% endif -%}
      {%- if post.category == "Armor" %} {% assign subtype_bool = true %} {% endif -%}
      {%- if subtype_bool -%}
        {%- capture subtype_string %}({% for subcat in post.item_subtypes | sort %}{{subcat | downcase}}{% unless forloop.last %}, {% endunless %}{% endfor %}){% endcapture -%}
      {%- endif -%}
      <item-tagline>{{ post.category | downcase }}{{ subtype_string }}, {{ post.item_rarity | downcase }}{% if post.item_attunement %} (requires attunement{% if post.item_requirement != null %} {{ post.item_requirement }}{% endif %}){% endif %}</item-tagline>
    </item-title>
    <item-extras aria-hidden="true">
      <div class="rarity"><img src="/images/rarities.svg" title="{{ post.item_rarity | downcase }}{% if post.item_attunement %} (requires attunement){% endif %}" /></div>
    </item-extras>
    {% if post.item_image %}<img src="{{ site.url }}{{ post.item_image }}" />{% endif %}
  </item-head>

  <item-details>
    <div class="type">{{ post.category | downcase }}</div>
    <div class="subtypes">{% for subcat in post.item_subtypes | sort %}{{subcat | downcase}}{% unless forloop.last %}, {% endunless %}{% endfor %}</div>
    <div class="rarity">{{ post.item_rarity | downcase }}</div>
    <div class="attunement">{% if post.item_attunement %}Yes{% else %}{% endif %}</div>
    <div class="cursed">{% if post.item_curse %}Yes{% else %}{% endif %}</div>
  </item-details>

  <item-description>
    {% if page_bool %}{{content}}{% else %}{{ post.content }}{% endif %}
  </item-description>

  <a href="{{ site.baseurl }}{{ post.url }}" class="read-more">
    <div class="expander">
      <span class="dot"></span><span class="dot"></span><span class="dot"></span>
    </div>
  </a>
</magic-item>
